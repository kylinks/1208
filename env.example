# ============================================
# 基础配置（必填）
# ============================================

# MySQL 数据库连接（示例：本地）
DATABASE_URL="mysql://root:password@localhost:3306/google_ads_system"
# Prisma 影子数据库（用于 migrate dev / 迁移测试）
SHADOW_DATABASE_URL="mysql://root:password@localhost:3306/google_ads_system_shadow"

# NextAuth（必填）
NEXTAUTH_URL="http://localhost:10111"
NEXTAUTH_SECRET="请替换为随机字符串（生产环境务必更换）"

# ============================================
# Google Ads API（必填）
# ============================================

# Google Ads 开发者令牌（Developer Token）
GOOGLE_ADS_DEVELOPER_TOKEN="your-developer-token"

# Google 服务账号（必填：二选一）
# 方式 1：服务账号 JSON 文件路径（推荐）
GOOGLE_SERVICE_ACCOUNT_KEY_PATH="./config/service-account-key.json"

# 方式 2：Base64 编码后的 JSON（可选）
# GOOGLE_SERVICE_ACCOUNT_KEY="base64-encoded-json-content"

# 服务账号邮箱（可选，仅用于日志/排查）
GOOGLE_SERVICE_ACCOUNT_EMAIL="xxx@xxx.iam.gserviceaccount.com"

# ============================================
# Google Ads 限速/并发（推荐：单进程部署优先稳）
# ============================================

# 全局（同进程）令牌桶：所有 Google Ads 请求统一排队限流
# - GOOGLEADS_RPS: 每秒补充 token 数（越小越稳，越大越快但更易触发 429）
# - GOOGLEADS_BURST: 最大突发 token（建议 1~3）
# - GOOGLEADS_MAX_WAIT_MS: 最长排队等待时间（ms）
GOOGLEADS_RPS=1
GOOGLEADS_BURST=2
GOOGLEADS_MAX_WAIT_MS=120000

# 同步广告系列时：每个 MCC 下并发处理 CID 的上限
GOOGLEADS_CID_CONCURRENCY=2

# 一键启动/监控：并发拉取点击数的 MCC 数量上限
ONECLICK_GOOGLEADS_MCC_CONCURRENCY=1

# ============================================
# Redis（队列版调度必填）
# ============================================

# Redis 连接地址（BullMQ 队列用）
REDIS_URL="redis://127.0.0.1:6379"

# ============================================
# Cron / 调度配置
# ============================================

# 调用 /api/cron/one-click-start 时的鉴权密钥
CRON_SECRET="please-set-a-random-secret"

# Dispatcher 配置
DISPATCH_BATCH_SIZE=20          # 每次调度最多多少用户入队
DISPATCH_LOCK_TTL=900000        # 锁 TTL（毫秒，默认 15 分钟）
DEFAULT_INTERVAL_MINUTES=5      # 新用户默认监控间隔（分钟）

# Worker 配置
WORKER_CONCURRENCY=2            # 单 Worker 进程并发数
WORKER_LOCK_TTL=900000          # Worker 任务锁 TTL（毫秒）


